#!/bin/bash -e

function log() {
	echo 1>&2 "${@}"
}

function abort() {
	log "${@}"
	log 'Aborting.'
	exit 1
}

function success() {
	log "${@}"
	exit 0
}


if [ "$1" = 'setup' ]
then
	log "This syntax is deprecated; use 'git fork setup' instead."
	git fork "${@}"
fi

SOURCE_REMOTE=$(git fork upstream.remote)
TARGET_REMOTE=$(git fork remote)

git remote-sync "$SOURCE_REMOTE" "$TARGET_REMOTE"
